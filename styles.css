@keyframes loading {
    0% {
        transform: rotate(0deg);
    }

    100% {
        transform: rotate(360deg);
    }
}

.git-signs-gutter {
    .cm-gutterElement {
        /* Needed to align the sign properly for different line heigts. Such as
         * when having a heading or list item.
         */
        padding-top: 0 !important;
    }
}

.workspace-leaf-content[data-type="git-view"] .button-border {
    border: 2px solid var(--interactive-accent);
    border-radius: var(--radius-s);
    transition: all 0.2s ease;
}

.workspace-leaf-content[data-type="git-view"] .view-content {
    padding-left: 0;
    padding-top: 0;
    padding-right: 0;
}

.workspace-leaf-content[data-type="git-history-view"] .view-content {
    padding-left: 0;
    padding-top: 0;
    padding-right: 0;
}

.loading {
    overflow: hidden;
}

.loading > svg {
    animation: 2s linear infinite loading;
    transform-origin: 50% 50%;
    display: inline-block;
}

.obsidian-git-center {
    margin: auto;
    text-align: center;
    width: 50%;
}

.obsidian-git-textarea {
    display: block;
    margin-left: auto;
    margin-right: auto;
}

.obsidian-git-disabled {
    opacity: 0.5;
}

.obsidian-git-center-button {
    display: block;
    margin: 20px auto;
}

.tooltip.mod-left {
    overflow-wrap: break-word;
}

.tooltip.mod-right {
    overflow-wrap: break-word;
}

/* Limits the scrollbar to the view body */
.git-view {
    display: flex;
    flex-direction: column;
    position: relative;
    height: 100%;
    background-color: var(--background-primary);
    min-width: 0;
    min-height: 0;
}

.git-tools {
    display: flex;
    margin-left: auto;
}
.git-tools .type {
    padding-left: var(--size-2-1);
    display: flex;
    align-items: center;
    justify-content: center;
    width: 11px;
}

.git-tools .type[data-type="M"] {
    color: var(--text-warning);
}
.git-tools .type[data-type="D"] {
    color: var(--text-error);
}
.git-tools .type[data-type="A"] {
    color: var(--text-success);
}
.git-tools .type[data-type="R"] {
    color: var(--text-accent);
}

.git-tools .buttons {
    display: flex;
    gap: 4px;
}
.git-tools .buttons > * {
    padding: 0 0;
    height: auto;
}

.workspace-leaf-content[data-type="git-view"] .tree-item-self,
.workspace-leaf-content[data-type="git-history-view"] .tree-item-self {
    align-items: center;
    border-radius: var(--radius-s);
    padding: 4px 6px;
    margin: 2px 0;
    transition: background-color 0.15s ease;
}

.workspace-leaf-content[data-type="git-view"] .tree-item-self:hover,
.workspace-leaf-content[data-type="git-history-view"] .tree-item-self:hover {
    background-color: var(--background-modifier-hover);
}

.workspace-leaf-content[data-type="git-view"]
    .tree-item-self:hover
    .clickable-icon,
.workspace-leaf-content[data-type="git-history-view"]
    .tree-item-self:hover
    .clickable-icon {
    color: var(--icon-color-hover);
}

/* Highlight an item as active if it's diff is currently opened */
.is-active .git-tools .buttons > * {
    color: var(--nav-item-color-active);
}

.git-author {
    color: var(--text-accent);
    font-size: var(--font-ui-smaller);
    font-weight: 500;
}

.git-date {
    color: var(--text-muted);
    font-size: var(--font-ui-smaller);
    font-weight: 400;
}

.git-ref {
    color: var(--text-accent);
}

/* Improved commit message input styling */
.git-commit-msg {
    position: relative;
    padding: 0;
    width: calc(100% - var(--size-4-8));
    margin: 8px 4px;
    border-radius: var(--radius-s);
    background: var(--background-modifier-form-field);
    box-shadow: 0 0 0 1px var(--background-modifier-border);
}

.commit-msg-input {
    width: 100%;
    overflow: hidden;
    resize: none;
    padding: 8px 30px 8px 8px;
    background-color: transparent;
    border: none;
    font-size: var(--font-ui-small);
    min-height: 40px;
    outline: none;
}

.git-commit-msg-clear-button {
    position: absolute;
    background: transparent;
    border-radius: 50%;
    color: var(--search-clear-button-color);
    cursor: var(--cursor);
    top: 6px;
    right: 6px;
    height: 24px;
    width: 24px;
    margin: auto;
    padding: 0 0;
    text-align: center;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: color 0.15s ease-in-out;
}

.git-commit-msg-clear-button:hover {
    background-color: var(--background-modifier-hover);
}

.git-commit-msg-clear-button:after {
    content: "";
    height: var(--search-clear-button-size);
    width: var(--search-clear-button-size);
    display: block;
    background-color: currentColor;
    mask-image: url("data:image/svg+xml,<svg viewBox='0 0 12 12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M6 12C9.31371 12 12 9.31371 12 6C12 2.68629 9.31371 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12ZM3.8705 3.09766L6.00003 5.22718L8.12955 3.09766L8.9024 3.8705L6.77287 6.00003L8.9024 8.12955L8.12955 8.9024L6.00003 6.77287L3.8705 8.9024L3.09766 8.12955L5.22718 6.00003L3.09766 3.8705L3.8705 3.09766Z' fill='currentColor'/></svg>");
    mask-repeat: no-repeat;
    -webkit-mask-image: url("data:image/svg+xml,<svg viewBox='0 0 12 12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M6 12C9.31371 12 12 9.31371 12 6C12 2.68629 9.31371 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12ZM3.8705 3.09766L6.00003 5.22718L8.12955 3.09766L8.9024 3.8705L6.77287 6.00003L8.9024 8.12955L8.12955 8.9024L6.00003 6.77287L3.8705 8.9024L3.09766 8.12955L5.22718 6.00003L3.09766 3.8705L3.8705 3.09766Z' fill='currentColor'/></svg>");
    -webkit-mask-repeat: no-repeat;
}

/* Improved folder styling */
.nav-folder.mod-root > .nav-folder-children {
    padding: 0;
}

.tree-item.nav-folder {
    margin: 0;
}

.tree-item.nav-folder > .tree-item-self {
    padding: 6px 8px;
    font-weight: 600;
    color: var(--h5-color);
    border-radius: var(--radius-s);
}

.tree-item.nav-folder .tree-item-children {
    padding: 0 0 0 16px;
}

.tree-item.nav-folder .tree-item.nav-file {
    margin: 0;
}

.tree-item.nav-folder .tree-item.nav-file .tree-item-self {
    padding: 4px 6px;
    border-radius: var(--radius-s);
}

.tree-item.nav-folder .tree-item.nav-file .tree-item-self:hover {
    background-color: var(--background-modifier-hover);
}

.files-count {
    font-size: var(--font-ui-smaller);
    color: var(--text-muted);
    padding-left: var(--size-2-2);
    font-weight: var(--font-medium);
}

.nav-action-button {
    padding: 6px 8px;
    border-radius: var(--radius-s);
    transition: all 0.15s ease;
}

.nav-action-button:hover {
    background-color: var(--background-modifier-hover);
    color: var(--text-normal);
}

/* ====== diff2html ====== */
.theme-dark,
.theme-light {
    --git-delete-bg: #ff475040;
    --git-delete-hl: #96050a75;
    --git-insert-bg: #68d36840;
    --git-insert-hl: #23c02350;
    --git-change-bg: #ffd55840;
    --git-selected: #3572b0;

    --git-delete: #c33;
    --git-insert: #399839;
    --git-change: #d0b44c;
    --git-move: #3572b0;
}

.git-diff {
    .d2h-d-none {
        display: none;
    }
    .d2h-wrapper {
        text-align: left;
        border-radius: 0.25em;
        overflow: auto;
    }
    .d2h-file-header.d2h-file-header {
        background-color: var(--background-secondary);
        border-bottom: 1px solid var(--background-modifier-border);
        font-family:
            Source Sans Pro,
            Helvetica Neue,
            Helvetica,
            Arial,
            sans-serif;
        height: 35px;
        padding: 5px 10px;
    }
    .d2h-file-header,
    .d2h-file-stats {
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
    }
    .d2h-file-stats {
        font-size: 14px;
        margin-left: auto;
    }
    .d2h-file-header {
        display: none;
    }
    .d2h-file-stats {
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
    }
    .d2h-lines-added {
        border: 1px solid var(--color-green);
        border-radius: 5px 0 0 5px;
        color: var(--color-green);
        padding: 2px;
        text-align: right;
        vertical-align: middle;
    }
    .d2h-lines-deleted {
        border: 1px solid var(--color-red);
        border-radius: 0 5px 5px 0;
        color: var(--color-red);
        margin-left: 1px;
        padding: 2px;
        text-align: left;
        vertical-align: middle;
    }
    .d2h-file-name-wrapper {
        -webkit-box-align: center;
        -ms-flex-align: center;
        align-items: center;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        font-size: 15px;
        width: 100%;
    }
    .d2h-file-name {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        color: var(--text-normal);
        font-size: var(--h5-size);
    }
    .d2h-file-wrapper {
        border: 1px solid var(--background-secondary-alt);
        border-radius: 3px;
        margin-bottom: 1em;
        max-height: 100%;
    }
    .d2h-file-collapse {
        -webkit-box-pack: end;
        -ms-flex-pack: end;
        -webkit-box-align: center;
        -ms-flex-align: center;
        align-items: center;
        border: 1px solid var(--background-secondary-alt);
        border-radius: 3px;
        cursor: pointer;
        display: none;
        font-size: 12px;
        margin-left: 2px;
        padding: 4px 8px;
    }
    .d2h-file-collapse.d2h-selected {
        background-color: var(--git-selected);
    }
    .d2h-file-collapse-input {
        margin: 0 4px 0 0;
    }
    .d2h-diff-table {
        border-collapse: collapse;
        font-family: var(--font-monospace);
        font-size: var(--code-size);
        width: 100%;
    }
    .d2h-files-diff {
        width: 100%;
    }
    .d2h-file-diff {
        /*
		overflow-y: scroll;
		*/
        border-radius: 5px;
        font-size: var(--font-text-size);
        line-height: var(--line-height-normal);
    }
    .d2h-file-side-diff {
        display: inline-block;
        margin-bottom: -8px;
        margin-right: -4px;
        overflow-x: scroll;
        overflow-y: hidden;
        width: 50%;
    }
    .d2h-code-line {
        padding-left: 6em;
        padding-right: 1.5em;
    }
    .d2h-code-line del,
    .d2h-code-side-line del {
        background-color: var(--git-delete-hl);
        display: inline-block;
        margin: 0;
        padding: 0.25em 0;
        text-decoration: none;
    }
    .d2h-code-line ins,
    .d2h-code-side-line ins {
        background-color: var(--git-insert-hl);
        display: inline-block;
        margin: 0;
        padding: 0.25em 0;
        text-decoration: none;
    }
    .d2h-code-side-line {
        padding-left: 6em;
        padding-right: 1.5em;
    }
    .d2h-file-diff {
        position: relative;
        width: 100%;
    }
    .d2h-code-line-ctn {
        background: var(--background-primary);
        display: inline-block;
        padding: 0;
        position: relative;
        width: 100%;
    }
    .d2h-code-table {
        border-spacing: 0;
        width: 100%;
    }
    .d2h-code-side-line {
        table-layout: fixed;
        width: 100%;
    }
    .d2h-code-line {
        display: table-cell;
        margin: 0;
        padding: 0;
        position: relative;
    }
    .d2h-code-side-line {
        display: table-cell;
        margin: 0;
        padding: 0;
        position: relative;
    }
    .d2h-blame {
        display: table-cell;
        margin: 0;
        padding: 0 4px;
        position: absolute;
        width: 100%;
    }
    .d2h-code-line-ctn {
        display: table-cell;
        margin: 0;
        padding: 0 4px;
        position: relative;
        width: 100%;
    }
    .d2h-emptyplaceholder {
        display: table-cell;
        margin: 0;
        padding: 0 4px;
        position: relative;
        width: 100%;
    }
    .d2h-code-line-prefix {
        display: table-cell;
        margin: 0;
        padding: 0 4px;
        position: relative;
        width: 100%;
    }
    .d2h-del {
        background-color: var(--git-delete-bg);
        border: 1px solid var(--git-delete-bg);
        border-radius: 0.2em;
    }
    .d2h-ins {
        background-color: var(--git-insert-bg);
        border: 1px solid var(--git-insert-bg);
        border-radius: 0.2em;
    }
    .d2h-chg {
        background-color: var(--git-change-bg);
        border: 1px solid var(--git-change-bg);
        border-radius: 0.2em;
    }
    .d2h-file-diff .d2h-del.d2h-change {
        background-color: var(--git-change-bg);
        border: 1px solid var(--git-change-bg);
    }
    .d2h-file-diff .d2h-ins.d2h-change {
        background-color: var(--git-change-bg);
        border: 1px solid var(--git-change-bg);
    }
    .d2h-file-list-wrapper {
        margin: 0;
        padding: 5px 10px;
    }
    .d2h-file-list {
        display: table;
        margin: 0;
        padding: 0;
        width: 100%;
    }
    .d2h-file-list > span {
        display: table-cell;
        padding: 0 5px;
    }
    .d2h-file-list .d2h-tag {
        font-size: 10px;
    }
    .d2h-file-wrapper {
        border: 1px solid var(--background-secondary);
        border-radius: 0;
        margin-bottom: 1em;
    }
    .d2h-file-header {
        background-color: var(--background-secondary);
        border-radius: 0;
        height: auto;
        padding: 5px 10px;
    }
    .d2h-file-stats {
        border: 1px solid;
        border-radius: 0.3em;
        display: table;
        float: right;
        font-size: 12px;
        height: 20px;
        margin-top: 3px;
        padding: 0.2em;
    }
    .d2h-lines-added {
        border-color: var(--color-green);
        color: var(--text-normal);
        text-align: right;
    }
    .d2h-lines-deleted {
        border-color: var(--color-red);
        color: var(--text-normal);
        text-align: left;
    }
    .d2h-file-name-wrapper {
        display: table-cell;
        float: none;
        font-size: 15px;
        padding-top: 0;
        width: 100%;
    }
    .d2h-deleted {
        color: var(--git-delete);
    }
    .d2h-added {
        color: var(--git-insert);
    }
    .d2h-changed {
        color: var(--git-change);
    }
    .d2h-moved {
        color: var(--git-move);
    }
    .d2h-tag {
        background-color: var(--background-secondary);
        border: 1px solid var(--background-modifier-border);
        border-radius: 0.2em;
        display: table-cell;
        float: none;
        font-size: 10px;
        height: 18px;
        line-height: 10px;
        margin: 0;
        padding: 0.2em;
        width: auto;
    }
    .d2h-file-diff {
        overflow-x: auto;
    }
    .d2h-code-line {
        background: var(--background-primary);
        padding: 0 4px;
    }
    .d2h-code-line *,
    .d2h-code-side-line * {
        background: transparent;
    }
    .d2h-code-side-line {
        background: var(--background-primary);
        padding: 0 4px;
    }
    .d2h-num {
        background: var(--background-primary);
        color: var(--text-faint);
        padding: 0 4px;
    }
    .d2h-code-linenumber {
        background-color: var(--background-primary);
        border: solid var(--background-modifier-border);
        border-width: 0 1px;
        color: var(--text-faint);
        padding: 0 8px !important;
        position: static;
        width: 1%;
    }
    .d2h-del {
        background-color: var(--git-delete-bg);
        border: 1px solid var(--git-delete-bg);
    }
    .d2h-ins {
        background-color: var(--git-insert-bg);
        border: 1px solid var(--git-insert-bg);
    }
    .d2h-code-line-prefix {
        background: var(--background-primary);
        padding: 0 4px;
    }
    .d2h-emptyplaceholder {
        background: var(--background-primary);
        padding: 0 4px;
    }
    .d2h-blame {
        color: var(--text-faint);
        font-family: monospace;
        font-size: 12px;
        padding: 0 20px;
    }
    .d2h-file-diff .d2h-del.d2h-change,
    .d2h-file-diff .d2h-ins.d2h-change {
        background-color: var(--git-change-bg);
        border: 1px solid var(--git-change-bg);
    }
}

/* Responsive adjustments */
@media screen and (max-width: 768px) {
    .git-tools .buttons {
        gap: 2px;
    }
    
    .nav-action-button {
        padding: 5px;
        min-width: 30px;
        min-height: 30px;
    }
    
    .git-commit-msg {
        margin: 6px 2px;
    }
    
    .tree-item.nav-folder .tree-item-children {
        padding: 0 0 0 10px;
    }
    
    .tree-item.nav-file .git-tools {
        min-width: 70px;
    }
}

@media screen and (max-width: 480px) {
    .nav-header {
        padding: 4px;
    }
    
    .nav-buttons-container {
        gap: 2px;
    }
    
    .nav-action-button {
        min-width: 28px;
        min-height: 28px;
        padding: 3px;
    }
    
    .git-commit-msg {
        margin: 4px 2px;
    }
    
    .git-commit-msg .commit-msg-input {
        font-size: var(--font-ui-smaller);
        padding: 6px 26px 6px 6px;
    }
    
    .tree-item.nav-file .git-tools {
        min-width: 60px;
    }
    
    .files-count {
        font-size: var(--font-ui-tiny);
    }
}

/* Add responsive container */
.git-view {
    display: flex;
    flex-direction: column;
    position: relative;
    height: 100%;
    background-color: var(--background-primary);
    min-width: 0;
    min-height: 0;
}

.nav-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 8px 4px 8px;
    border-bottom: 1px solid var(--background-modifier-border);
}

.nav-files-container {
    flex: 1;
    overflow-y: auto;
    min-height: 0;
}
